<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CBT Trainer Mode – Unified Inject</title>
<link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.frame{
  width:360px;
  height:640px;
  padding:22px;
  position:relative;
  overflow:hidden;
}

/* TITLE */
.title{
  font-family:'Anton';
  font-size:36px;
  text-align:center;
  margin-bottom:14px;
}
.shock{
  animation:shake .15s infinite, flash .25s infinite;
}
@keyframes shake{
  0%{transform:translate(0)}
  25%{transform:translate(-3px,1px)}
  50%{transform:translate(3px,-1px)}
  75%{transform:translate(-2px,1px)}
}
@keyframes flash{
  0%{color:#fff}
  33%{color:#ff3b3b}
  66%{color:#00ffe5}
  100%{color:#fff}
}

/* QUESTION */
.question{
  font-size:15px;
  line-height:1.5;
  margin-bottom:14px;
}

/* OPTIONS */
.options div{
  border:1px solid #333;
  padding:10px;
  margin-bottom:8px;
  opacity:.85;
}
.pressure{
  animation:shakeX .25s infinite;
}
@keyframes shakeX{
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
}

/* WRONG */
.wrong{
  position:absolute;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Anton';
  font-size:40px;
  color:#ff3b3b;
  opacity:0;
}
.wrong.show{opacity:1}

/* RATIONALE */
.rationale{
  position:absolute;
  top:56%;
  left:18px;
  right:18px;
  font-size:18px;
  line-height:1.55;
  text-align:center;
  opacity:0;
}
.rationale.show{opacity:1}
</style>
</head>

<body>
<div class="frame">
  <div class="title shock" id="title"></div>
  <div class="question" id="q"></div>
  <div class="options pressure" id="opt"></div>
  <div class="wrong" id="wrong">SALAH</div>
  <div class="rationale" id="rat"></div>
</div>

<audio id="cue" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-soft-click-1121.mp3">
</audio>

<script>
/* ================= ENGINE UTILS ================= */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

/* ================= INJECTED BANKS ================= */

/* CORE / MANUAL RATIONALE */
const BANK_CORE = [
  {
    hook1:"SOAL INI MENIPU OTOMATIS",
    hook2:"LOGIKA KAMU KEPIKIRAN INI",
    q:"Jika p maka q. q terjadi. Kesimpulan yang tepat?",
    o:["p terjadi","p tidak terjadi","tidak dapat ditentukan","p pasti"],
    r:"Dalam implikasi logika, akibat (q) tidak menjamin sebab (p)."
  },
  {
    hook1:"KATA SEBAGIAN BIKIN JEBLOK",
    hook2:"INI KESALAHAN UMUM",
    q:"Sebagian ASN adalah dosen. Kesimpulan yang benar?",
    o:["Semua ASN dosen","Sebagian dosen ASN","Tidak ada dosen ASN","Semua dosen ASN"],
    r:"Kata sebagian hanya menjamin ada irisan, tidak boleh dinaikkan jadi semua."
  }
];

/* SNBT LOGIKA */
const BANK_LOGIKA = [
  {
    hook1:"LOGIKA DASAR TAPI MENIPU",
    hook2:"PERHATIKAN SEBAGIAN",
    q:"Jika semua A adalah B dan semua B adalah C, maka?",
    o:["A adalah C","C adalah A","Sebagian","Tidak ada"],
    r:"Relasi transitif: semua A pasti termasuk C."
  },
  {
    hook1:"TRANSITIF ITU KUNCI",
    hook2:"SIAPA PALING TINGGI?",
    q:"Anton > Budi, Budi > Caca. Siapa paling tinggi?",
    o:["Anton","Budi","Caca","Tidak tahu"],
    r:"Relasi berantai menunjukkan Anton paling tinggi."
  },
  {
    hook1:"PREMIS SALAH",
    hook2:"JANGAN TERJEBAK",
    q:"Semua burung bisa terbang. Penguin burung.",
    o:["Benar","Salah","Sebagian","Tidak tahu"],
    r:"Premis salah karena penguin tidak bisa terbang."
  }
];

/* SNBT KUANTITATIF */
const BANK_KUANT = [
  {
    hook1:"INI BUKAN TAMBAH HARI",
    hook2:"YANG DIHITUNG LAJU",
    q:"A 4 hari, B 6 hari. Bersama?",
    o:["5 hari","4 hari","2,4 hari","10 hari"],
    r:"A=1/4, B=1/6 → total 5/12 → waktu 12/5 = 2,4 hari."
  },
  {
    hook1:"DISKON BERTAHAP",
    hook2:"BANYAK YANG SALAH",
    q:"Diskon 50% lalu 50% lagi. Sisa?",
    o:["Gratis","25%","50%","75%"],
    r:"0,5 × 0,5 = 0,25 → sisa 25%."
  },
  {
    hook1:"PERBANDINGAN TERBALIK",
    hook2:"LEBIH ORANG LEBIH CEPAT",
    q:"5 orang 10 hari. 10 orang?",
    o:["20","10","5","2"],
    r:"Total kerja tetap: 50 → 50/10 = 5 hari."
  }
];

/* ================= MERGE + SHUFFLE ================= */
const ITEMS = shuffle([
  ...BANK_CORE,
  ...BANK_LOGIKA,
  ...BANK_KUANT
]);

/* ================= PLAYER ================= */
let idx = 0;
const title = document.getElementById("title");
const qEl = document.getElementById("q");
const optEl = document.getElementById("opt");
const wrong = document.getElementById("wrong");
const rat = document.getElementById("rat");
const cue = document.getElementById("cue");
cue.volume = 0.25;

function loadItem(){
  const it = ITEMS[idx];

  title.textContent = it.hook1;
  title.classList.add("shock");
  qEl.textContent = it.q;
  optEl.innerHTML = it.o.map(x=>`<div>${x}</div>`).join("");
  optEl.classList.add("pressure");

  setTimeout(()=>title.textContent = it.hook2,1200);

  setTimeout(()=>{
    title.classList.remove("shock");
    optEl.classList.remove("pressure");
    wrong.classList.add("show");
  },3000);

  setTimeout(()=>{
    wrong.classList.remove("show");
    rat.textContent = it.r;
    rat.classList.add("show");
  },4600);

  setTimeout(()=>{
    rat.classList.remove("show");
    cue.currentTime = 0;
    cue.play().catch(()=>{});
    idx = (idx + 1) % ITEMS.length;
    loadItem();
  },8000);
}

loadItem();
</script>
</body>
</html>
